<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Docker Containers Monitoring</title>
    <script src="https://unpkg.com/htmx.org"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/ws.js"></script>
    <link rel="stylesheet" href="../static/styles.css" />
</head>
<body>

    <h1>Monitoring des Conteneurs Docker</h1>
    <div hx-ext="ws" ws-connect="ws://localhost:8080/ws">
        <div id="container-list" ws-receive>
        </div>
    </div>

    <script>
        document.addEventListener("htmx:wsAfterMessage", function(event) {
            let containers = JSON.parse(event.detail.message);
            let html = containers.map(c => 
                `<div class="container">
                    <strong>${c.name}</strong> - CPU: ${c.cpu}, RAM: ${c.ram}
                </div>`
            ).join("");
            document.getElementById("container-list").innerHTML = html;
        });
    </script>

</body>
</html>
